@using ShoeStoreApp.Utils
@{
    ViewData["Title"] = "Home Page";
}

@model Product

@{
    var translator = new VietnameseTranslator();
}

@section Styles {
    <link href="@Url.Content("~/css/detail.css")" rel="stylesheet" type="text/css" />
}


<!-- Main Container -->
<div class="main-container container pt-3 h-100">
    <div class="alert alert-success hide " id="success-alert" role="alert">
        <div>
            Sản phẩm đã được thêm vào giỏ hàng của bạn!
        </div>
    </div>

    <div class="m-3 mx-5">
        <div class="row ">
            <div class="col-6">
                <img id="main-img" src="@Model.Variants.ElementAt(0).ImgPath" alt="" />
            </div>
            <div class="col-1">
            </div>
            <div class="col-5">
                <input type="hidden" id="productName" value="@Model.Name">
                <h2>@Model.Name</h2>
                <h6 class="card-text text-secondary">Giày @translator.Translate(Model.Category) @translator.Translate(Model.Gender)</h6>
                <br />
                <b class="price">@CurrencyFormat.Format(Model.Price)</b>
                <div class="mt-3">
                    <h6>Màu sắc</h6>
                    @for (var i = 0; i < Model.Variants.Count; i++)
                    {
                        <div class="img-container me-1 @((i == 0) ? "select" : string.Empty)">
                            <img data-variantid="@Model.Variants.ElementAt(i).Id" data-color="@Model.Variants.ElementAt(i).Color}"
                                 class="color-img"
                                 src="@Model.Variants.ElementAt(i).ImgPath"
                                 alt="" />
                        </div>
                    }

                </div>
                @for (var i = 0; i < Model.Variants.Count; i++)
                {
                    <div class="size-container mt-3 mb-1 @((i == 0) ? string.Empty : "hidden")" data-variantid="@Model.Variants.ElementAt(i).Id">
                        <h6>Kích cỡ</h6>
                        @foreach (var item in Model.Variants.ElementAt(i).Items)
                        {
                            <div class="size-card @((item.StockQuantity == 0) ? "disabled" : string.Empty)" data-size="@item.Size">
                                <span>@item.Size</span>
                            </div>
                        }
                    </div>
                }

                @foreach(var variant in Model.Variants)
                {
                    <div>
                        <div data-variantid="@variant.Id">
                            @foreach (var item in variant.Items)
                            {
                                <span>
                                    <span data-size="@item.Size" data-variantid="@item.Id" class="quantity-display hidden text-secondary">Số lượng: @item.StockQuantity</span>
                                </span>
                            }
                        </div>
                    </div>
                }

                <button class="btn btn-dark w-100 p-3 fs-5 mb-5 mt-3" onclick="addToCart()">
                    Thêm vào giỏ hàng
                </button>
            </div>
        </div>
    </div>
</div>
<!-- Main Container -->
@section Scripts {
    <script src="~/js//detail.js"></script>
}

